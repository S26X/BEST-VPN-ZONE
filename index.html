<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Elite VPN Store Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        :root { --accent: #3b82f6; --neon: #00f2ff; --bg: #030712; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: var(--bg); color: white; margin: 0; }

        /* --- UNIQUE LOADER --- */
        #loader-screen {
            position: fixed; inset: 0; background: radial-gradient(circle at center, #111827, #030712); 
            z-index: 10000; display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .loader-cube {
            width: 60px; height: 60px; background: var(--accent);
            animation: cube-spin 1.5s ease-in-out infinite;
            box-shadow: 0 0 50px rgba(59, 130, 246, 0.7); border-radius: 8px;
        }
        @keyframes cube-spin {
            0% { transform: perspective(120px) rotateX(0deg) rotateY(0deg); }
            50% { transform: perspective(120px) rotateX(-180.1deg) rotateY(0deg); }
            100% { transform: perspective(120px) rotateX(-180deg) rotateY(-179.9deg); }
        }

        /* --- MODERN UI ELEMENTS --- */
        .glass { background: rgba(17, 24, 39, 0.7); backdrop-filter: blur(15px); border: 1px solid rgba(255,255,255,0.08); }
        .neon-border { border: 1px solid var(--accent); box-shadow: 0 0 15px rgba(59, 130, 246, 0.3); }
        
        /* Floating Nav Bar */
        .nav-container {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 400px; height: 65px; border-radius: 25px;
            display: flex; justify-content: space-around; align-items: center; z-index: 1000;
        }
        .nav-item { transition: 0.3s; padding: 10px 15px; border-radius: 15px; display: flex; flex-direction: column; align-items: center; }
        .nav-active { background: rgba(59, 130, 246, 0.2); color: var(--accent); }
        
        /* User Profile Card */
        .profile-card {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            border-radius: 24px; position: relative; overflow: hidden;
            border-left: 4px solid var(--accent);
        }
        .profile-card::after {
            content: ''; position: absolute; top: -50%; right: -20%; width: 150px; height: 150px;
            background: var(--accent); filter: blur(80px); opacity: 0.2;
        }

        .tab-content { display: none; animation: slideUp 0.4s ease-out; }
        .tab-active { display: block; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* Admin Controls */
        .admin-btn { background: linear-gradient(90deg, #dc2626, #991b1b); animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 0.8; } 50% { opacity: 1; } 100% { opacity: 0.8; } }
    </style>
</head>
<body class="pb-32">

    <div id="loader-screen">
        <div class="loader-cube"></div>
        <h2 class="mt-6 font-bold tracking-[0.3em] text-blue-400">ELITE SECURE</h2>
    </div>

    <div class="p-5 max-w-lg mx-auto">
        
        <div class="profile-card p-6 mb-8 shadow-2xl">
            <div class="flex items-center gap-4">
                <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-2xl font-bold shadow-lg shadow-blue-500/20">
                    <span id="initials">U</span>
                </div>
                <div>
                    <h3 class="text-xl font-bold" id="user-name">Premium User</h3>
                    <p class="text-blue-400 text-xs font-semibold tracking-wider">RANK: DIAMOND CLIENT</p>
                    <p class="text-gray-400 text-[10px] mt-1">ID: <span id="tg-id">8505710811</span></p>
                </div>
            </div>
            <div id="admin-trigger" class="hidden mt-4 admin-btn p-3 rounded-xl text-center text-xs font-black cursor-pointer shadow-xl uppercase tracking-widest">
                Access Admin Control
            </div>
        </div>

        <div id="tab-store" class="tab-content tab-active">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-extrabold tracking-tight">Vpn Services</h2>
                <span class="text-[10px] bg-green-500/20 text-green-400 px-2 py-1 rounded-full border border-green-500/30">SERVER LIVE</span>
            </div>

            <div id="plans-container" class="space-y-4">
                <div class="animate-pulse space-y-4">
                    <div class="h-20 bg-gray-800 rounded-2xl"></div>
                    <div class="h-20 bg-gray-800 rounded-2xl"></div>
                </div>
            </div>
        </div>

        <div id="tab-orders" class="tab-content">
            <h2 class="text-2xl font-extrabold mb-6">Active Orders</h2>
            <div id="orders-container" class="space-y-4 text-center py-10 text-gray-500">
                You haven't purchased anything yet.
            </div>
        </div>

        <div id="tab-admin" class="tab-content">
            <h2 class="text-2xl font-extrabold text-red-500 mb-6 underline decoration-double">Management</h2>
            <div class="grid grid-cols-2 gap-3 mb-6">
                <button onclick="renderAdmin('plans')" class="glass p-4 rounded-2xl text-xs font-bold hover:bg-blue-600/20 transition">Plans Add</button>
                <button onclick="renderAdmin('orders')" class="glass p-4 rounded-2xl text-xs font-bold hover:bg-blue-600/20 transition">Manage Orders</button>
                <button onclick="renderAdmin('payments')" class="glass p-4 rounded-2xl text-xs font-bold hover:bg-blue-600/20 transition">Pay Methods</button>
                <button onclick="renderAdmin('history')" class="glass p-4 rounded-2xl text-xs font-bold hover:bg-blue-600/20 transition">View History</button>
            </div>
            <div id="admin-ui" class="glass rounded-3xl p-5 min-h-[300px]">
                <p class="text-gray-500 text-center mt-20">Select a tool to begin management.</p>
            </div>
        </div>

    </div>

    <nav class="nav-container glass shadow-2xl">
        <div class="nav-item nav-active" onclick="switchTab('store', this)">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path></svg>
            <span class="text-[10px] font-bold mt-1">STORE</span>
        </div>
        <div class="nav-item" onclick="switchTab('orders', this)">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg>
            <span class="text-[10px] font-bold mt-1">ORDERS</span>
        </div>
        <div class="nav-item" onclick="switchTab('help', this)">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
            <span class="text-[10px] font-bold mt-1">HELP</span>
        </div>
    </nav>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, set, push, onValue, update, remove } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDZQHw4-DdUdDmJXcuK_88JrJxv35FfYeY",
            authDomain: "vpn-store-s26x.firebaseapp.com",
            databaseURL: "https://vpn-store-s26x-default-rtdb.firebaseio.com",
            projectId: "vpn-store-s26x",
            storageBucket: "vpn-store-s26x.firebasestorage.app",
            messagingSenderId: "373050662329",
            appId: "1:373050662329:web:b3d02424ef0986d6abea68"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const tg = window.Telegram?.WebApp;
        const ADMIN_ID = 8505710811;

        // User Setup
        const userId = tg?.initDataUnsafe?.user?.id || 12345678;
        const userName = tg?.initDataUnsafe?.user?.first_name || "Guest User";
        document.getElementById('tg-id').innerText = userId;
        document.getElementById('user-name').innerText = userName;
        document.getElementById('initials').innerText = userName[0].toUpperCase();

        if(userId == ADMIN_ID) document.getElementById('admin-trigger').classList.remove('hidden');

        // Tab Switcher
        window.switchTab = (tab, el) => {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('tab-active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('nav-active'));
            document.getElementById(`tab-${tab}`).classList.add('tab-active');
            el.classList.add('nav-active');
        };

        document.getElementById('admin-trigger').onclick = () => {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('tab-active'));
            document.getElementById('tab-admin').classList.add('tab-active');
        };

        // Realtime Data: Plans
        onValue(ref(db, 'plans'), (snap) => {
            const data = snap.val();
            const container = document.getElementById('plans-container');
            container.innerHTML = '';
            for(let id in data) {
                if(data[id].visible || userId == ADMIN_ID) {
                    container.innerHTML += `
                        <div class="glass p-5 rounded-3xl flex justify-between items-center transition-transform active:scale-95">
                            <div class="flex items-center gap-4">
                                <div class="w-12 h-12 rounded-2xl bg-white/5 flex items-center justify-center border border-white/10">
                                    <img src="https://cdn-icons-png.flaticon.com/512/2092/2092663.png" class="w-7 h-7">
                                </div>
                                <div>
                                    <h4 class="font-bold text-sm">${data[id].name}</h4>
                                    <span class="text-[10px] text-gray-400">⚡ Ultra Fast Connection</span>
                                </div>
                            </div>
                            <button class="bg-blue-600 text-white px-5 py-2 rounded-2xl text-xs font-black shadow-lg shadow-blue-600/30">৳ ${data[id].price}</button>
                        </div>
                    `;
                }
            }
        });

        // Admin Rendering Logic
        window.renderAdmin = (tool) => {
            const ui = document.getElementById('admin-ui');
            if(tool === 'plans') {
                ui.innerHTML = `
                    <div class="space-y-3">
                        <input id="new-name" class="w-full bg-black/40 p-3 rounded-xl border border-white/10 text-sm" placeholder="Plan Name (e.g. Express 30d)">
                        <input id="new-price" class="w-full bg-black/40 p-3 rounded-xl border border-white/10 text-sm" placeholder="Price (৳)">
                        <button id="add-btn" class="w-full bg-green-600 p-3 rounded-xl font-bold text-sm">Create Plan</button>
                    </div>
                `;
                document.getElementById('add-btn').onclick = () => {
                    const name = document.getElementById('new-name').value;
                    const price = document.getElementById('new-price').value;
                    if(name && price) {
                        push(ref(db, 'plans'), { name, price, visible: true });
                        alert("Plan Added!");
                    }
                };
            }
            if(tool === 'orders') {
                ui.innerHTML = `<p class="text-xs text-center text-gray-500 italic">No pending orders to manage.</p>`;
            }
        };

        // Loader Hide
        window.addEventListener('load', () => {
            setTimeout(() => {
                const ls = document.getElementById('loader-screen');
                ls.style.opacity = '0';
                ls.style.transition = '0.5s';
                setTimeout(() => ls.remove(), 500);
            }, 2500);
        });

    </script>
</body>
</html>
